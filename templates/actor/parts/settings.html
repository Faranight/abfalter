<div class="tab settings">

    <div class="settingsOptions">
        <div class="settingsSubsection">
            <h5> Mystic Settings </h5>
            <div>
                <span> Magic Module for Attack </span>
                <button type="button" class="toggleBoolean {{#if data.toggles.magicAtkModule}}kiBought{{/if}}" 
                        data-label="data.toggles.magicAtkModule" data-ability="{{data.toggles.magicAtkModule}}">
                    {{#if data.toggles.magicAtkModule}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
            <div class="{{#if data.toggles.magicDodgeModule}}checkLock{{/if}}">
                <span> Magic Module for Defense </span>
                <button type="button" class="toggleBoolean {{#if data.toggles.magicDefModule}}kiBought{{/if}}"
                        data-label="data.toggles.magicDefModule" data-ability="{{data.toggles.magicDefModule}}">
                    {{#if data.toggles.magicDefModule}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
            {{#if data.toggles.magicDefModule}}
            <div>
                <span class="settingsSubsectionIndent"> Dodge over Block</span>
                <button type="button" class="toggleBoolean {{#if data.toggles.magicDodgeModule}}kiBought{{/if}}"
                        data-label="data.toggles.magicDodgeModule" data-ability="{{data.toggles.magicDodgeModule}}">
                    {{#if data.toggles.magicDodgeModule}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
            {{/if}}
        </div>

        <div class="settingsSubsection">
            <h5> Ki Settings </h5>
            <div class="{{#if data.toggles.innatePower}}checkLock{{/if}}">
                <span> Unified Ki Pools </span>
                <button type="button" class="toggleBoolean {{#if data.toggles.unifiedPools}}kiBought{{/if}}"
                        data-label="data.toggles.unifiedPools" data-ability="{{data.toggles.unifiedPools}}">
                    {{#if data.toggles.unifiedPools}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
            {{#if data.toggles.unifiedPools}}
            <div>
                <span class="settingsSubsectionIndent"> Innate Power </span>
                <button type="button" class="toggleBoolean {{#if data.toggles.innatePower}}kiBought{{/if}}"
                        data-label="data.toggles.innatePower" data-ability="{{data.toggles.innatePower}}">
                    {{#if data.toggles.innatePower}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
            {{/if}}
            <div>
                <span> Dragon Seals </span>
                <button type="button" class="toggleBoolean {{#if data.toggles.dragonSeals}}kiBought{{/if}}"
                        data-label="data.toggles.dragonSeals" data-ability="{{data.toggles.dragonSeals}}">
                    {{#if data.toggles.dragonSeals}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
        </div>

        <div class="settingsSubsection">
            <h5> Psychic Settings </h5>
            <div class="{{#if data.toggles.psychicDodgeStatus}}checkLock{{/if}}">
                <span> Psychic Module for Attack </span>
                <button type="button" class="toggleBoolean {{#if data.toggles.moduleStatus}}kiBought{{/if}}"
                        data-label="data.toggles.moduleStatus" data-ability="{{data.toggles.moduleStatus}}">
                    {{#if data.toggles.moduleStatus}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
            {{#if data.toggles.moduleStatus}}
            <div>
                <span class="settingsSubsectionIndent"> Dodge over Block </span>
                <button type="button" class="toggleBoolean {{#if data.toggles.psychicDodgeStatus}}kiBought{{/if}}"
                        data-label="data.toggles.psychicDodgeStatus" data-ability="{{data.toggles.psychicDodgeStatus}}">
                    {{#if data.toggles.psychicDodgeStatus}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
            {{/if}}
        </div>

        <div class="settingsSubsection">
            <h5> Homebrew Settings </h5>
            <div>
                <span> Hide Normal Currency </span>
                <button type="button" class="toggleBoolean {{#if data.toggles.currencyHide}}kiBought{{/if}}"
                        data-label="data.toggles.currencyHide" data-ability="{{data.toggles.currencyHide}}">
                    {{#if data.toggles.currencyHide}}
                    <span> Active </span>
                    {{else}}
                    <span> Not Active </span>
                    {{/if}}
                </button>
            </div>
        </div>
    </div>

    <div class="settings2">
        <div>
            <div>
                <div class="rollRange">
                    <h5> {{localize "abfalter.settingsTab.openRoll"}} </h5>
                    <div>
                        <label> <span> {{localize "abfalter.basicInfo.base"}} </span> <input type="number" name="data.rollRange.base" value="{{data.rollRange.base}}" /> </label>
                        <label> <span> {{localize "abfalter.basicInfo.spec"}} </span> <input type="number" name="data.rollRange.spec" value="{{data.rollRange.spec}}" /> </label>
                        <label> <span> {{localize "abfalter.basicInfo.temp"}} </span> <input type="number" name="data.rollRange.temp" value="{{data.rollRange.temp}}" /> </label>
                        <label>
                            <span> doubles? </span>
                            <select name="data.rollRange.doubles" data-dtype="boolean">
                                {{#select data.rollRange.doubles}}
                                <option value="false"> {{localize "abfalter.basicInfo.no"}} </option>
                                <option value="true"> {{localize "abfalter.basicInfo.yes"}} </option>
                                {{/select}}
                            </select>
                        </label>
                    </div>
                    <div>
                        <label> <span> {{localize "abfalter.basicInfo.final"}} </span> <input type="number" name="data.openRangeFinal" value="{{data.openRangeFinal}}" readonly /> </label>
                    </div>
                </div>

                <div class="rollRange">
                    <h5> {{localize "abfalter.settingsTab.fumbleRoll"}} </h5>
                    <div>
                        <label> <span> {{localize "abfalter.basicInfo.base"}} </span> <input type="number" name="data.fumleRange.base" value="{{data.fumleRange.base}}" /> </label>
                        <label> <span> {{localize "abfalter.basicInfo.spec"}} </span> <input type="number" name="data.fumleRange.spec" value="{{data.fumleRange.spec}}" /> </label>
                        <label> <span> {{localize "abfalter.basicInfo.temp"}} </span> <input type="number" name="data.fumleRange.temp" value="{{data.fumleRange.temp}}" /> </label>
                    </div>
                    <div>
                        <label> <span> {{localize "abfalter.basicInfo.final"}} </span> <input type="number" name="data.fumbleRangeFinal" value="{{data.fumbleRangeFinal}}" readonly /> </label>
                    </div>
                </div>
            </div>

            <div class="charOptions">

                <h5> {{localize "abfalter.settingsTab.charOptions"}} </h5>
                <div>
                    <label> <span> {{localize "abfalter.settingsTab.levelMod"}} </span> <input type="number" name="data.levelinfo.levelmod" value="{{data.levelinfo.levelmod}}" /> </label>
                    <label> <span> {{localize "abfalter.settingsTab.presenceMod"}} </span> <input type="number" name="data.levelinfo.presencemod" value="{{data.levelinfo.presencemod}}" /> </label>
                    <div>
                        <span> Hide Background Tab </span>
                        <button type="button" class="toggleBoolean {{#if data.toggles.backgroundTab}}kiBought{{/if}}"
                                data-label="data.toggles.backgroundTab" data-ability="{{data.toggles.backgroundTab}}">
                            {{#if data.toggles.backgroundTab}}
                            <span> Hidden </span>
                            {{else}}
                            <span> Not Hidden </span>
                            {{/if}}
                        </button>
                    </div>
                    <div>
                        <span> Hide Magic Tab </span>
                        <button type="button" class="toggleBoolean {{#if data.toggles.magicTab}}kiBought{{/if}}"
                                data-label="data.toggles.magicTab" data-ability="{{data.toggles.magicTab}}">
                            {{#if data.toggles.magicTab}}
                            <span> Hidden </span>
                            {{else}}
                            <span> Not Hidden </span>
                            {{/if}}
                        </button>
                    </div>
                    <div>
                        <span> Hide Psychic Tab </span>
                        <button type="button" class="toggleBoolean {{#if data.toggles.psychicTab}}kiBought{{/if}}"
                                data-label="data.toggles.psychicTab" data-ability="{{data.toggles.psychicTab}}">
                            {{#if data.toggles.psychicTab}}
                            <span> Hidden </span>
                            {{else}}
                            <span> Not Hidden </span>
                            {{/if}}
                        </button>
                    </div>
                    <div>
                        <span> Hide Ki Tab </span>
                        <button type="button" class="toggleBoolean {{#if data.toggles.kiTab}}kiBought{{/if}}"
                                data-label="data.toggles.kiTab" data-ability="{{data.toggles.kiTab}}">
                            {{#if data.toggles.kiTab}}
                            <span> Hidden </span>
                            {{else}}
                            <span> Not Hidden </span>
                            {{/if}}
                        </button>
                    </div>
                    <div>
                        <span> Hide Bio Tab </span>
                        <button type="button" class="toggleBoolean {{#if data.toggles.bioTab}}kiBought{{/if}}"
                                data-label="data.toggles.bioTab" data-ability="{{data.toggles.bioTab}}">
                            {{#if data.toggles.bioTab}}
                            <span> Hidden </span>
                            {{else}}
                            <span> Not Hidden </span>
                            {{/if}}
                        </button>
                    </div>

                    <div>
                        <span> Activate Shield </span>
                        <button type="button" class="toggleBoolean {{#if data.toggles.shield}}kiBought{{/if}}"
                                data-label="data.toggles.shield" data-ability="{{data.toggles.shield}}">
                            {{#if data.toggles.shield}}
                            <span> Active </span>
                            {{else}}
                            <span> Not Active </span>
                            {{/if}}
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="innateBonuses">
            <h5> Classes & Levels </h5>
            <div>
                <span> Class </span>
                <span> Level </span>
            </div>

            <div class="{{#if data.itemToggle.class}}item-list{{/if}}">
                {{#each classes as |class id|}}
                <div class="class-item item normal-item" data-item-id="{{class._id}}">
                    <div>
                        <input class="item-name inline-edit" data-field="name" type="text" value="{{class.name}}" placeholder="{{localize "abfalter.sheet.nameItem"}}" />
                        <input class="inline-edit" data-field="system.main.levels" type="number" value="{{class.system.main.levels}}" />
                        <a class="item-expand {{#if system.expand}}showOpacity{{/if}}"><i class="{{#if system.expand}}fas fa-caret-up{{else}}fas fa-caret-down{{/if}}"></i></a>
                    </div>
                    {{#if system.expand}}
                    <span> SHow Info Here</span>
                    {{/if}}
                </div>
                {{/each}}
            </div>

            <div>
                <a class="item-control item-create" data-type="class"><i class="fas fa-plus"></i> {{localize "abfalter.armoryTab.addClass"}} </a>
                <a class="toggleBoolean {{#if data.itemToggle.class}}armorpenalty{{/if}}" data-label="data.itemToggle.class" data-ability="{{data.itemToggle.class}}"><i class="{{#if data.itemToggle.class}}fa-solid fa-bars-staggered{{else}}fa-solid fa-bars{{/if}}"></i> {{localize "abfalter.sheet.modify"}} </a>
            </div>
        </div>


        <div class="homebrew">
            <h5> Homebrew Settings / WIP </h5>
            <label>
                <span> Spirit Damage Type </span>
                <input type="checkbox" name="data.toggles.spiritDamageType" data-dtype="boolean" {{checked data.toggles.spiritDamageType}} />
            </label>
            <label>
                <span> Increased Strengthening </span>
                <input type="checkbox" name="data.toggles.psychicStrengthening" data-dtype="boolean" {{checked data.toggles.psychicStrengthening}} />
            </label>
        </div>

    </div>

</div>
